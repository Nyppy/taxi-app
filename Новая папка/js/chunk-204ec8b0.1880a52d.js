(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-204ec8b0"],{"8e01":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.bill?a("div",{staticClass:"fix-header card-no-border fix-sidebar"},[a("div",{attrs:{id:"main-wrapper"}},[a("Header"),a("div",{staticClass:"page-wrapper",staticStyle:{"min-height":"447px"}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row page-titles"},[a("div",{staticClass:"col-md-6 col-8 align-self-center"},[a("h3",{staticClass:"text-themecolor mb-0 mt-0"},[t._v(" Платежная ведомость #"+t._s(t.bill.key)+" ")]),a("Breadcrumbs",{attrs:{pages:t.pages}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"m-t-40"},[a("div",{staticClass:"dataTables_wrapper container-fluid dt-bootstrap4 no-footer",attrs:{id:"simple-table_wrapper"}},[a("BillChildFilter"),a("BillChildTable"),a("BillChildAction")],1)])])])])]),a("Footer")],1)],1)]):t._e()},r=[],l=(a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),i=a("2f62"),n=a("0418"),c=a("fd2d"),o=a("b6c6"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_length",attrs:{id:"simple-table_length"}},[a("label",[t._v("Отображено "),a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.limit,expression:"limit",modifiers:{number:!0}}],staticClass:"form-control form-control-sm",attrs:{name:"simple-table_length","aria-controls":"simple-table"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.limit=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"10"}},[t._v("10")]),a("option",{attrs:{value:"25"}},[t._v("25")]),a("option",{attrs:{value:"50"}},[t._v("50")]),a("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" записей на страницу ")])])]),t._m(0)])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_filter",attrs:{id:"simple-table_filter"}},[a("label",[t._v("Поиск:"),a("input",{staticClass:"form-control form-control-sm",attrs:{type:"search",placeholder:"","aria-controls":"simple-table"}})])])])}];function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={name:"BillChildFilter",computed:{limit:{get:function(){return this.$store.state.bill.limit},set:function(t){this.setLimit(t),this.setPage(1),this.getPaymentRequests()}}},methods:b({},Object(i["d"])("bill",["setLimit","setPage"]),{},Object(i["b"])("bill",["getPaymentRequests"]))},v=m,f=a("2877"),g=Object(f["a"])(v,u,p,!1,null,null,null),y=g.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("table",{staticClass:"display nowrap table table-hover table-striped table-bordered table-drivers table-responsive dataTable no-footer",staticStyle:{width:"100%"},attrs:{id:"simple-table",cellspacing:"0",width:"100%",role:"grid","aria-describedby":"simple-table_info"}},[t._m(0),a("tbody",t._l(t.paymentRequests,(function(e){return a("tr",{key:e.id,staticClass:"odd",attrs:{role:"row"}},[a("td",[a("label",{staticClass:"mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.selected)?t._i(t.selected,e.id)>-1:t.selected},on:{change:function(a){var s=t.selected,r=a.target,l=!!r.checked;if(Array.isArray(s)){var i=e.id,n=t._i(s,i);r.checked?n<0&&(t.selected=s.concat([i])):n>-1&&(t.selected=s.slice(0,n).concat(s.slice(n+1)))}else t.selected=l}}}),a("span",{staticClass:"sr-only"},[t._v("Select Row")])])]),a("td",[t._v(t._s(e.key))]),a("td",[a("span",{staticClass:"text-muted"},[a("i",{staticClass:"far fa-clock"}),t._v(" "+t._s(t.date(e.created)))])]),a("td",[t._v(t._s(e.fio))]),a("td",[t._v(t._s(e.group))]),a("td",[t._v(t._s(e.get_payment_type_display))]),a("td",[t._v(t._s(e.payment_sum))]),a("td",[t._v(t._s(e.payment_amount_sum))]),a("td",[t._v(t._s(e.get_status_display))])])})),0)])])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{attrs:{role:"row"}},[a("th",{staticClass:"no-sort sorting_disabled",staticStyle:{width:"15px"},attrs:{rowspan:"1",colspan:"1","aria-label":" Select All"}},[a("label",{staticClass:"mb-0"},[a("input",{attrs:{type:"checkbox"}}),a("span",{staticClass:"sr-only"},[t._v(" Select All")])])]),a("th",{staticClass:"sorting",staticStyle:{width:"89px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"ID платежа: activate to sort column ascending"}},[t._v(" ID платежа ")]),a("th",{staticClass:"sorting",staticStyle:{width:"129px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Дата создания: activate to sort column ascending"}},[t._v(" Дата создания ")]),a("th",{staticClass:"sorting",staticStyle:{width:"117px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"ФИО водителя: activate to sort column ascending"}},[t._v(" ФИО водителя ")]),a("th",{staticClass:"sorting",staticStyle:{width:"102px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Группа: activate to sort column ascending"}},[t._v(" Группа ")]),a("th",{staticClass:"sorting",staticStyle:{width:"89px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Тип заявки: activate to sort column ascending"}},[t._v(" Тип заявки ")]),a("th",{staticClass:"sorting",staticStyle:{width:"111px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Сумма заявки: activate to sort column ascending"}},[t._v(" Сумма заявки ")]),a("th",{staticClass:"sorting",staticStyle:{width:"147px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Сумма на выплату: activate to sort column ascending"}},[t._v(" Сумма на выплату ")]),a("th",{staticClass:"sorting",staticStyle:{width:"147px"},attrs:{tabindex:"0","aria-controls":"simple-table",rowspan:"1",colspan:"1","aria-label":"Статус: activate to sort column ascending"}},[t._v(" Статус ")])])])}],O=a("5c0f");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={name:"BillChildTable",computed:P({selected:{get:function(){return this.$store.state.bill.selectedPaymentRequest},set:function(t){this.setSelectedPaymentRequest(t)}}},Object(i["e"])("bill",["paymentRequests"])),methods:P({date:function(t){return Object(O["a"])(t)}},Object(i["d"])("bill",["setSelectedPaymentRequest"]))},C=j,x=Object(f["a"])(C,h,_,!1,null,null,null),R=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12",class:{"col-md-5":!t.selectedPaymentRequest.length,"col-md-3":t.selectedPaymentRequest.length}},[a("div",{staticClass:"dataTables_info",attrs:{id:"simple-table_info",role:"status","aria-live":"polite"}},[t._v(" Показано с "+t._s(t.fullCount)+" по "+t._s(t.firstRecord)+" из "+t._s(t.lastRecord)+" записей ")])]),t.selectedPaymentRequest.length?a("div",{staticClass:"col-sm-12 col-md-6 row align-items-center"},[a("div",{staticClass:"col-md-4"},[t._v(" Действия с выбранными ")]),a("div",{staticClass:"col-md-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectAction,expression:"selectAction"}],staticClass:"form-control custom-select",attrs:{"data-placeholder":"Выберите"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectAction=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",selected:"",hidden:""},domProps:{value:null}},[t._v(" Выберите ")]),a("option",{domProps:{value:1}},[t._v(" Оплатить ")]),a("option",{domProps:{value:2}},[t._v(" Вернуть в заявки ")])])]),a("div",{staticClass:"col-md-4"},[a("button",{staticClass:"btn btn-primary",on:{click:t.action}},[t._v(" Выполнить ")])])]):t._e(),a("div",{staticClass:"col-sm-12",class:{"col-md-7":!t.selectedPaymentRequest.length,"col-md-3":t.selectedPaymentRequest.length}},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers",attrs:{id:"simple-table_paginate"}},[t.totalPages>1?a("paginate",{attrs:{"page-count":t.totalPages,"prev-text":"Пред.","next-text":"След.","container-class":"pagination","page-class":"paginate_button page-item","page-link-class":"page-link","prev-link-class":"page-link","next-link-class":"page-link","prev-class":"paginate_button page-item previous","next-class":"paginate_button page-item next","hide-prev-next":!0},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)])])},q=[],S=(a("96cf"),a("1da1")),A=a("2777"),D=a("4328"),B=a.n(D);function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T={name:"BillChildAction",data:function(){return{selectAction:null}},computed:$({page:{get:function(){return this.$store.state.bill.page},set:function(t){this.setPage(t),this.getPaymentRequests()}}},Object(i["e"])("bill",["fullCount","totalPages","selectedPaymentRequest"]),{},Object(i["c"])("bill",["firstRecord","lastRecord"])),methods:$({payPaymentRequest:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["a"].post("/pay-payment-request/",B.a.stringify({payment_requests:this.selectedPaymentRequest},{arrayFormat:"repeat",encode:!1}));case 2:e=t.sent,a=e.data,!0===a.status&&(this.setSelectedPaymentRequest([]),this.getPaymentRequests());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),backPaymentRequest:function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["a"].post("/back-payment-request/",B.a.stringify({payment_requests:this.selectedPaymentRequest},{arrayFormat:"repeat",encode:!1}));case 2:e=t.sent,a=e.data,!0===a.status&&(this.setSelectedPaymentRequest([]),this.getPaymentRequests());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),action:function(){return 1===this.selectAction?this.payPaymentRequest():2===this.selectAction?this.backPaymentRequest():null}},Object(i["d"])("bill",["setPage","setSelectedPaymentRequest"]),{},Object(i["b"])("bill",["getPaymentRequests"]))},F=T,I=Object(f["a"])(F,k,q,!1,null,null,null),N=I.exports;function H(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function J(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?H(Object(a),!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var L={components:{BillChildAction:N,BillChildTable:R,BillChildFilter:y,Breadcrumbs:o["a"],Header:n["a"],Footer:c["a"]},data:function(){return{pages:[{title:"Ведомости",url:"/bill"}]}},computed:J({},Object(i["e"])("bill",["bill"])),mounted:function(){var t=this;this.reset(),this.setBillId(this.$route.params.id),this.getBill().then((function(){t.pages.push({title:"Платежная ведомость #".concat(t.bill.key)})})),this.getPaymentRequests()},methods:J({},Object(i["d"])("bill",["setBillId"]),{},Object(i["b"])("bill",["getBill","reset","getPaymentRequests"]))},z=L,G=Object(f["a"])(z,s,r,!1,null,null,null);e["default"]=G.exports},b6c6:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("router-link",{attrs:{to:"/index"}},[t._v(" Главная ")])],1),t._l(t.pages,(function(e){return a("li",{key:e.title,staticClass:"breadcrumb-item active"},[e.url?a("router-link",{attrs:{to:e.url}},[t._v(" "+t._s(e.title)+" ")]):[t._v(" "+t._s(e.title)+" ")]],2)}))],2)},r=[],l={name:"Breadcrumbs",props:{pages:{type:Array,default:function(){return[]}}}},i=l,n=a("2877"),c=Object(n["a"])(i,s,r,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-204ec8b0.1880a52d.js.map